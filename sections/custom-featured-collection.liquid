{%- style -%}
  /* Desktop visibility (1024px+) */
  .desktop-hero-section {
    display: none;
  }
  @media (min-width: 1024px) {
    .desktop-hero-section {
      display: block;
    }
  }

  /* Mobile visibility (<1024px) */
  .mobile-hero-section {
    display: block;
  }
  @media (min-width: 1024px) {
    .mobile-hero-section {
      display: none;
    }
  }

  /* Tablet optimizations (767px - 1023px) */
  @media (min-width: 767px) and (max-width: 1023px) {
    .mobile-hero-section .flex-shrink-0 {
      width: 280px !important;
      height: 400px !important;
      overflow: hidden !important; /* Kart içinde dikey scroll önleme */
    }
    .mobile-hero-section .flex-shrink-0 img {
      width: 280px !important;
      height: 320px !important; /* Aspect ratio korunarak büyütüldü */
      object-fit: cover !important;
    }
    .mobile-hero-section .flex-shrink-0 > div {
      width: 280px !important;
    }
    .mobile-hero-section .flex-shrink-0 > div > div:first-child {
      width: 280px !important;
    }
    .mobile-hero-section .flex {
      gap: 24px !important;
      padding-left: 24px !important;
      padding-right: 24px !important;
    }
  }

  /* Mobile defaults (<767px) */
  @media (max-width: 766px) {
    .mobile-hero-section .flex-shrink-0 {
      width: 148px !important;
      height: 293px !important;
    }
    .mobile-hero-section .flex-shrink-0 img {
      width: 148px !important;
      height: 200px !important;
    }
    .mobile-hero-section .flex-shrink-0 > div {
      width: 149px !important;
      height: 84px !important;
    }
    .mobile-hero-section .flex-shrink-0 > div > div:first-child {
      width: 149px !important;
    }
  }

  /* Hide scrollbar */
  .products-scroll::-webkit-scrollbar {
    display: none;
  }
  .products-scroll {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Hide scroll button on wide screens (1600px+) */
  @media (min-width: 1600px) {
    .scroll-button-desktop {
      display: none !important;
    }
  }

  /* Cursor pointer for interactive elements */
  [data-product-link] {
    cursor: pointer !important;
  }

  /* Custom CSS for color buttons */
  .color-dot {
    width: 12px !important;
    height: 12px !important;
    border-radius: 50% !important;
    border: 1px solid #ccc !important;
    display: block !important;
    visibility: visible !important;
    cursor: pointer !important;
  }
  .color-dot.selected {
    border-color: #000;
  }
  .color-container {
    display: flex !important;
    gap: 8px !important;
    visibility: visible !important;
  }

  /* Extra assurance for mobile and tablet */
  @media (max-width: 1199px) {
    .color-dot {
      width: 12px !important;
      height: 12px !important;
      border-radius: 50% !important;
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
    }
    .color-container {
      display: flex !important;
      gap: 8px !important;
      visibility: visible !important;
    }
  }
{%- endstyle -%}

<section
  class="bg-white"
  id="featured-hero-{{ section.id }}"
  data-money-format="{{ shop.money_format | escape }}"
>
  <!-- DESKTOP -->
  <div class="desktop-hero-section w-full h-[864px]">
    <div class="max-w-[1440px] mx-auto h-full">
      <div class="grid grid-cols-12 h-full gap-3">
        <!-- Left 6 columns: Hero -->
        <div class="col-span-6 h-full overflow-hidden">
          {% if section.settings.hero_image != blank %}
            <img
              src="{{ section.settings.hero_image | image_url: width: 998 }}"
              alt="{{ section.settings.hero_image.alt | escape }}"
              class="w-full h-full object-cover"
              width="998"
              height="1198"
              loading="lazy"
            >
          {% else %}
            <img
              src="{{ 'featured-collection-hero.png' | asset_url }}"
              alt="Hero"
              class="w-full h-full object-cover"
              width="998"
              height="1198"
              loading="lazy"
            >
          {% endif %}
        </div>

        <!-- Right 6 columns: Content -->
        <div class="col-span-6 bg-white flex flex-col">
          <!-- Text Container: Title, Description, Link -->
          <div class="flex-shrink-0 pt-[96px] pl-[120px]">
            <!-- TITLE -->
            <h2
              class="font-avant font-bold text-black text-[31.25px] leading-[130%] tracking-[0] max-w-[494px] mt-0"
            >
              {% if section.settings.title != blank %}
                {{ section.settings.title }}
              {% else %}
                Everyday items, we have something to suit every occasion.
              {% endif %}
            </h2>

            <!-- DESCRIPTION -->
            <div class="mt-6 max-w-[432px]">
              <p class="font-avenir font-normal text-[#666666] text-[16px] leading-[160%] tracking-[0]">
                {% if section.settings.description != blank %}
                  {{ section.settings.description }}
                {% else %}
                  At suspendisse augue lectus arcu, accumsan ut sit posuere vitae sit tincidunt semper eu proin leo
                  gravida cursus.
                {% endif %}
              </p>
            </div>

            <!-- LINK -->
            <div class="mt-14 flex flex-col items-start gap-[10px] w-fit">
              <a
                href="{% if section.settings.link_url != blank %}{{ section.settings.link_url }}{% else %}#{% endif %}"
                class="font-avenir font-bold text-black text-[12.8px] leading-[100%] capitalize whitespace-nowrap"
              >
                {% if section.settings.link_text != blank %}
                  {{ section.settings.link_text }}
                {% else %}
                  Shop All Everyday Items
                {% endif %}
              </a>
              <span
                class="block h-[1px] bg-black w-full"
              ></span>
            </div>
          </div>

          <!-- Product Container: Product Cards -->
          <div class="flex-1 flex items-end pb-[95px]">
            <div
              class="overflow-y-hidden products-scroll"
              style="width: 720px; height: 363px; overflow-x: auto; margin-left: 120px;"
              id="products-scroll-container-{{ section.id }}"
            >
              <div class="flex" style="width: max-content; gap: 32px;">
                {% if section.settings.collection != blank and section.settings.collection.products.size > 0 %}
                  {% assign show_count = section.settings.products_to_show | default: 3 %}
                  {% for product in section.settings.collection.products limit: show_count %}
                    {% assign initial_variant = product.selected_or_first_available_variant %}
                    {% assign featured_card_image = initial_variant.featured_image | default: product.featured_image %}
                    {% assign color_option_index = null %}
                    {% unless product.has_only_default_variant %}
                      {% for option in product.options_with_values %}
                        {% assign option_name_downcase = option.name | downcase %}
                        {% if option_name_downcase contains 'color'
                          or option_name_downcase contains 'colour'
                          or option_name_downcase contains 'renk'
                        %}
                          {% assign color_option_index = forloop.index0 %}
                          {% break %}
                        {% endif %}
                      {% endfor %}
                      {% if color_option_index == null %}
                        {% assign color_option_index = 0 %}
                      {% endif %}
                    {% endunless %}
                    {% capture product_payload %}
                      {
                        "id": {{ product.id | json }},
                        "title": {{ product.title | json }},
                        "url": {{ product.url | json }},
                        "featured_image": {% if product.featured_image %}{{ product.featured_image | image_url: width: 600 | json }}{% else %}null{% endif %},
                        "variants": [
                          {% for variant in product.variants %}
                            {
                              "id": {{ variant.id | json }},
                              "title": {{ variant.title | json }},
                              "price": {{ variant.price | json }},
                              "compare_at_price": {{ variant.compare_at_price | json }},
                              "available": {{ variant.available | json }},
                              "image": {% if variant.featured_image %}{{ variant.featured_image | image_url: width: 600 | json }}{% else %}null{% endif %},
                              "options": {{ variant.options | json }}
                            }{% unless forloop.last %},{% endunless %}
                          {% endfor %}
                        ],
                        "color_option_index": {% if color_option_index != nil %}{{ color_option_index | json }}{% else %}null{% endif %}
                      }
                    {% endcapture %}
                    <div
                      class="flex-shrink-0 product-card"
                      style="width: 230px;"
                      data-product-card
                      data-product-json="{{ product_payload | strip_newlines | escape }}"
                      data-initial-variant-id="{{ initial_variant.id }}"
                      {% if color_option_index != null %}
                        data-color-option-index="{{ color_option_index }}"
                      {% endif %}
                    >
                      <!-- Image -->
                      {% if featured_card_image %}
                        <img
                          src="{{ featured_card_image | image_url: width: 400 }}"
                          alt="{{ initial_variant.title | default: product.title | escape }}"
                          class="object-cover"
                          style="width: 230px; height: 310px;"
                          width="400"
                          height="537"
                          loading="lazy"
                          data-product-image
                        >
                      {% else %}
                        <img
                          src="{{ 'bg-1.png' | asset_url }}"
                          alt="{{ product.title | escape }}"
                          class="object-cover"
                          style="width: 230px; height: 310px;"
                          width="400"
                          height="537"
                          loading="lazy"
                          data-product-image
                        >
                      {% endif %}

                      <!-- Product Info -->
                      <div class="mt-[12px]" style="height: 70px;">
                        <a
                          href="{{ product.url | append: '?variant=' | append: initial_variant.id }}"
                          data-product-link
                        >
                          <p class="font-avenir text-black line-clamp-1" style="font-size: 12.8px; line-height: 160%;">
                            {{ product.title }}
                          </p>
                        </a>
                        <div class="flex justify-between items-center mt-1">
                          <p
                            class="font-avenir font-bold text-black text-[12.8px] min-w-[68px]"
                            data-product-price
                            {% if section.settings.currency_symbol != blank %}
                              data-currency-symbol="{{ section.settings.currency_symbol | strip }}"
                            {% endif %}
                          >
                            {% if section.settings.currency_symbol != blank %}
                              {{ section.settings.currency_symbol | strip -}}
                              {{- initial_variant.price | money_without_currency }}
                            {% else %}
                              {{ initial_variant.price | money }}
                            {% endif %}
                          </p>
                          {% if product.has_only_default_variant %}
                            <div class="color-container" data-variant-pills></div>
                          {% else %}
                            <div class="color-container" data-variant-pills>
                              {% assign rendered_colors = '' %}
                              {% for variant in product.variants %}
                                {% if color_option_index == 0 %}
                                  {% assign color_value = variant.option1 %}
                                {% elsif color_option_index == 1 %}
                                  {% assign color_value = variant.option2 %}
                                {% elsif color_option_index == 2 %}
                                  {% assign color_value = variant.option3 %}
                                {% else %}
                                  {% assign color_value = variant.option1 %}
                                {% endif %}
                                {% if color_value != blank %}
                                  {% assign color_token = '|' | append: color_value | append: '|' %}
                                  {% unless rendered_colors contains color_token %}
                                    <button
                                      type="button"
                                      class="color-dot{% if variant.id == initial_variant.id %} selected{% endif %}"
                                      data-variant-id="{{ variant.id }}"
                                      data-variant-color="{{ color_value | escape }}"
                                      aria-label="{{ color_value | escape }}"
                                      style="background-color: {{ color_value | handle | replace: '-', '' }};"
                                    ></button>
                                    {% assign rendered_colors = rendered_colors | append: color_token %}
                                  {% endunless %}
                                {% endif %}
                              {% endfor %}
                            </div>
                          {% endif %}
                        </div>
                      </div>
                    </div>
                  {% endfor %}
                {% else %}

                {% endif %}
              </div>
            </div>
          </div>

          <!-- Scroll Buttons -->
          <button
            class="scroll-button-desktop absolute scroll-button-left"
            style="width: 40px; height: 40px; top: 541px; right: 210px; border: 1px solid #0000001A; background: transparent; padding: 12px; cursor: pointer; display: none;"
            onclick="scrollProducts(this);"
            data-direction="left"
          >
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M11 12.5L4.5 8L11 3.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button
            class="scroll-button-desktop absolute scroll-button-right"
            style="width: 40px; height: 40px; top: 541px; right: 50px; border: 1px solid #0000001A; background: transparent; padding: 12px; cursor: pointer;"
            onclick="scrollProducts(this);"
            data-direction="right"
          >
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M5 12.5L11.5 8L5 3.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- MOBILE -->
  <div class="mobile-hero-section relative">
    <!-- HERO BANNER (360x437px) -->
    <div class="relative h-[437px]">
      {% if section.settings.hero_image != blank %}
        <img
          src="{{ section.settings.hero_image | image_url: width: 720 }}"
          alt="{{ section.settings.hero_image.alt | escape }}"
          class="w-full h-full object-cover"
          width="360"
          height="437"
          loading="lazy"
        >
      {% else %}
        <img
          src="{{ 'featured-collection-hero.png' | asset_url }}"
          alt="Hero"
          class="w-full h-full object-cover"
          width="360"
          height="437"
          loading="lazy"
        >
      {% endif %}

      <!-- GRADIENT OVERLAY -->
      <div
        class="absolute inset-0 z-10"
        style="background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, #000000 78.65%) !important; opacity: 0.9 !important;"
      ></div>

      <!-- TEXT OVERLAY CONTAINER -->
      <div class="absolute z-20" style="top: 248px; left: 24px; width: 312px;">
        <!-- TITLE -->
        <h2
          class="font-avant font-bold text-white mb-4"
          style="width: 312px; height: 78px; font-size: 20px; line-height: 130%;"
        >
          {% if section.settings.title != blank %}
            {{ section.settings.title }}
          {% else %}
            Everyday items, we have something to suit every occasion.
          {% endif %}
        </h2>

        <!-- LINK -->
        <div class="mt-6 w-fit">
          <a
            href="{% if section.settings.link_url != blank %}{{ section.settings.link_url }}{% else %}#{% endif %}"
            class="text-white font-avenir font-bold text-[12.8px] leading-[100%] capitalize block whitespace-nowrap"
          >
            {% if section.settings.link_text != blank %}
              {{ section.settings.link_text }}
            {% else %}
              Shop All Everyday Items
            {% endif %}
          </a>
          <!-- Link line (link width) -->
          <span
            class="block mt-[6px] h-[2px] bg-white w-full"
          ></span>
        </div>
      </div>
    </div>

    <!-- PRODUCT LIST CONTAINER (Overlay on Hero) -->
    <div
      class="absolute z-30"
      style="top: 397px; left: 0; right: 0; width: 100%; height: 293px;"
    >
      <div>
        <div
          class="flex overflow-x-auto products-scroll pb-8"
          style="scroll-behavior: smooth; gap: 16px; padding-left: 24px; padding-right: 24px;"
        >
          {% if section.settings.collection != blank and section.settings.collection.products.size > 0 %}
            {% assign show_count = section.settings.products_to_show | default: 3 %}
            {% for product in section.settings.collection.products limit: show_count %}
              {% assign initial_variant = product.selected_or_first_available_variant %}
              {% assign featured_card_image = initial_variant.featured_image | default: product.featured_image %}
              {% assign color_option_index = null %}
              {% unless product.has_only_default_variant %}
                {% for option in product.options_with_values %}
                  {% assign option_name_downcase = option.name | downcase %}
                  {% if option_name_downcase contains 'color'
                    or option_name_downcase contains 'colour'
                    or option_name_downcase contains 'renk'
                  %}
                    {% assign color_option_index = forloop.index0 %}
                    {% break %}
                  {% endif %}
                {% endfor %}
                {% if color_option_index == null %}
                  {% assign color_option_index = 0 %}
                {% endif %}
              {% endunless %}
              {% capture product_payload %}
                {
                  "id": {{ product.id | json }},
                  "title": {{ product.title | json }},
                  "url": {{ product.url | json }},
                  "featured_image": {% if product.featured_image %}{{ product.featured_image | image_url: width: 600 | json }}{% else %}null{% endif %},
                  "variants": [
                    {% for variant in product.variants %}
                      {
                        "id": {{ variant.id | json }},
                        "title": {{ variant.title | json }},
                        "price": {{ variant.price | json }},
                        "compare_at_price": {{ variant.compare_at_price | json }},
                        "available": {{ variant.available | json }},
                        "image": {% if variant.featured_image %}{{ variant.featured_image | image_url: width: 600 | json }}{% else %}null{% endif %},
                        "options": {{ variant.options | json }}
                      }{% unless forloop.last %},{% endunless %}
                    {% endfor %}
                  ],
                  "color_option_index": {% if color_option_index != nil %}{{ color_option_index | json }}{% else %}null{% endif %}
                }
              {% endcapture %}
              <!-- PRODUCT CARD (148x293px) -->
              <div
                class="flex-shrink-0 product-card"
                data-product-card
                data-initial-variant-id="{{ initial_variant.id }}"
                {% if color_option_index != null %}
                  data-color-option-index="{{ color_option_index }}"
                {% endif %}
                data-product-json="{{ product_payload | strip_newlines | escape }}"
              >
                <!-- PRODUCT IMAGE (148x200px) -->
                {% if featured_card_image %}
                  <img
                    src="{{ featured_card_image | image_url: width: 300 }}"
                    alt="{{ initial_variant.title | default: product.title | escape }}"
                    class="object-cover"
                    width="300"
                    height="405"
                    loading="lazy"
                    data-product-image
                  >
                {% else %}
                  <img
                    src="{{ 'bg-' | append: forloop.index | append: '.png' | asset_url }}"
                    alt="{{ product.title | escape }}"
                    class="object-cover"
                    width="300"
                    height="405"
                    loading="lazy"
                    data-product-image
                  >
                {% endif %}

                <!-- PRODUCT INFO CONTAINER (149x84px) -->
                <div style="margin-top: 8px;">
                  <!-- TITLE AND PRICE CONTAINER (149x40px) -->
                  <div style="width: 149px; margin-bottom: 8px;">
                    <a href="{{ product.url | append: '?variant=' | append: initial_variant.id }}" data-product-link>
                      <p
                        class="font-avenir text-black"
                        style="font-size: 12.8px; line-height: 160%; margin: 0; padding: 0;"
                      >
                        {{ product.title }}
                      </p>
                    </a>
                    <p
                      class="font-avenir font-bold text-black"
                      style="font-size: 12.8px; margin: 0; padding: 0;"
                      data-product-price
                      {% if section.settings.currency_symbol != blank %}
                        data-currency-symbol="{{ section.settings.currency_symbol | strip }}"
                      {% endif %}
                    >
                      {% if section.settings.currency_symbol != blank %}
                        {{ section.settings.currency_symbol | strip -}}
                        {{- initial_variant.price | money_without_currency }}
                      {% else %}
                        {{ initial_variant.price | money }}
                      {% endif %}
                    </p>
                  </div>

                  <!-- COLOR OPTIONS CONTAINER (66x12px) -->
                  {% if product.has_only_default_variant %}
                    <div
                      style="width: 66px !important; height: 12px !important;"
                      class="color-container"
                      data-variant-pills
                    ></div>
                  {% else %}
                    <div
                      style="width: 66px !important; height: 12px !important; display: flex !important; gap: 8px !important; visibility: visible !important; margin-top: 8px !important;"
                      data-variant-pills
                      class="color-container"
                    >
                      {% assign rendered_colors = '' %}
                      {% for variant in product.variants %}
                        {% if color_option_index == 0 %}
                          {% assign color_value = variant.option1 %}
                        {% elsif color_option_index == 1 %}
                          {% assign color_value = variant.option2 %}
                        {% elsif color_option_index == 2 %}
                          {% assign color_value = variant.option3 %}
                        {% else %}
                          {% assign color_value = variant.option1 %}
                        {% endif %}
                        {% if color_value != blank %}
                          {% assign color_token = '|' | append: color_value | append: '|' %}
                          {% unless rendered_colors contains color_token %}
                            <button
                              type="button"
                              class="color-dot{% if variant.id == initial_variant.id %} selected{% endif %}"
                              data-variant-id="{{ variant.id }}"
                              data-variant-color="{{ color_value | escape }}"
                              aria-label="{{ color_value | escape }}"
                              style="background-color: {{ color_value | handle | replace: '-', '' }};"
                            ></button>
                            {% assign rendered_colors = rendered_colors | append: color_token %}
                          {% endunless %}
                        {% endif %}
                      {% endfor %}
                    </div>
                  {% endif %}
                </div>
              </div>
            {% endfor %}
          {% else %}

          {% endif %}
        </div>
      </div>

      <!-- Mobile/Tablet Scroll Buttons -->
      <button
        class="scroll-button-mobile-tablet absolute scroll-button-left"
        style="width: 32px; height: 32px; top: 40%; right: 12px; transform: translateY(-50%); border: 1px solid rgba(0,0,0,0.1); background: transparent !important; padding: 8px; cursor: pointer; display: none; z-index: 10;"
        onclick="scrollProductsMobile(this);"
        data-direction="left"
      >
        <svg width="12" height="12" viewBox="0 0 16 16" fill="none">
          <path d="M11 12.5L4.5 8L11 3.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <button
        class="scroll-button-mobile-tablet absolute scroll-button-right"
        style="width: 32px; height: 32px; top: 40%; right: 52px; transform: translateY(-50%); border: 1px solid rgba(0,0,0,0.1); background: transparent !important; padding: 8px; cursor: pointer; z-index: 10;"
        onclick="scrollProductsMobile(this);"
        data-direction="right"
      >
        <svg width="12" height="12" viewBox="0 0 16 16" fill="none">
          <path d="M5 12.5L11.5 8L5 3.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>

    <!-- SPACER (Total height: 437 + 293 = 730px) -->
    <div style="height: 293px;"></div>
  </div>
</section>

<script>
  (function () {
    var sectionId = '{{ section.id }}';
    var scrollContainerId = 'products-scroll-container-{{ section.id }}';

    window.scrollProducts = function (buttonEl) {
      if (!buttonEl) return;
      var sectionEl = buttonEl.closest('section');
      if (!sectionEl) return;
      var container = sectionEl.querySelector('#' + scrollContainerId);
      if (!container) return;

      var direction = buttonEl.dataset.direction || 'right';
      var scrollAmount = direction === 'left' ? -230 : 230;
      container.scrollBy({ left: scrollAmount, behavior: 'smooth' });
    };

    window.scrollProductsMobile = function (buttonEl) {
      if (!buttonEl) return;
      var sectionEl = buttonEl.closest('section');
      if (!sectionEl) return;
      // Mobil/tablet için farklı container seçici
      var container = sectionEl.querySelector('.mobile-hero-section .products-scroll');
      if (!container) return;

      var direction = buttonEl.dataset.direction || 'right';
      var scrollAmount = direction === 'left' ? -160 : 160; // Mobil için daha küçük scroll
      container.scrollBy({ left: scrollAmount, behavior: 'smooth' });
    };

    document.addEventListener('DOMContentLoaded', function () {
      var sectionEl = document.getElementById('featured-hero-' + sectionId);
      if (!sectionEl) return;

      initializeDesktopScroll(sectionEl);
      initializeMobileTabletScroll(sectionEl);
      initializeVariantInteractions(sectionEl);
    });

    function initializeDesktopScroll(sectionEl) {
      var container = sectionEl.querySelector('#' + scrollContainerId);
      var scrollButtonLeft = sectionEl.querySelector('.scroll-button-left');
      var scrollButtonRight = sectionEl.querySelector('.scroll-button-right');
      if (!container || !scrollButtonLeft || !scrollButtonRight) return;

      function checkScrollNeeded() {
        var screenWidth = window.innerWidth;

        if (screenWidth >= 1600) {
          container.style.width = '754px';
          container.style.overflowX = 'visible';
          scrollButtonLeft.style.display = 'none';
          scrollButtonRight.style.display = 'none';
        } else {
          container.style.width = '720px';
          container.style.overflowX = 'auto';
          checkScrollButtons();
        }
      }

      function checkScrollButtons() {
        var screenWidth = window.innerWidth;

        if (screenWidth >= 1600) {
          scrollButtonLeft.style.display = 'none';
          scrollButtonRight.style.display = 'none';
          return;
        }

        // Sol buton: Başta değilsek göster (scrollLeft > 0)
        var canScrollLeft = container.scrollLeft > 5;
        scrollButtonLeft.style.display = canScrollLeft ? 'block' : 'none';

        // Sağ buton: Sonda değilsek göster
        var canScrollRight = container.scrollLeft + container.clientWidth < container.scrollWidth - 5;
        scrollButtonRight.style.display = canScrollRight ? 'block' : 'none';
      }

      checkScrollNeeded();
      checkScrollButtons();

      container.addEventListener('scroll', checkScrollButtons);

      var resizeTimeout;
      window.addEventListener('resize', function () {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(function () {
          checkScrollNeeded();
          checkScrollButtons();
        }, 100);
      });
    }

    function initializeMobileTabletScroll(sectionEl) {
      var container = sectionEl.querySelector('.mobile-hero-section .products-scroll');
      var scrollButtonLeft = sectionEl.querySelector('.scroll-button-mobile-tablet.scroll-button-left');
      var scrollButtonRight = sectionEl.querySelector('.scroll-button-mobile-tablet.scroll-button-right');
      if (!container || !scrollButtonLeft || !scrollButtonRight) return;

      function checkMobileTabletScrollButtons() {
        var canScrollLeft = container.scrollLeft > 5;
        var canScrollRight = container.scrollLeft + container.clientWidth < container.scrollWidth - 5;

        scrollButtonLeft.style.display = canScrollLeft ? 'block' : 'none';
        scrollButtonRight.style.display = canScrollRight ? 'block' : 'none';
      }

      // İlk kontrol
      checkMobileTabletScrollButtons();

      // Scroll event listener
      container.addEventListener('scroll', checkMobileTabletScrollButtons);

      // Resize için de kontrol edelim
      var resizeTimeout;
      window.addEventListener('resize', function () {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(checkMobileTabletScrollButtons, 100);
      });
    }

    function initializeVariantInteractions(sectionEl) {
      var moneyFormat = sectionEl.dataset.moneyFormat || '{{ shop.money_format | escape }}';
      var productCards = sectionEl.querySelectorAll('[data-product-card]');
      if (!productCards.length) return;

      productCards.forEach(function (card) {
        var productJson = card.dataset.productJson;
        if (!productJson) return;

        var productData;
        try {
          productData = JSON.parse(productJson);
        } catch (error) {
          console.error('Failed to parse product JSON', error);
          return;
        }

        if (!productData.variants || !productData.variants.length) return;

        var pills = card.querySelectorAll('[data-variant-id]');
        var priceEl = card.querySelector('[data-product-price]');
        var imageEl = card.querySelector('[data-product-image]');
        var linkEl = card.querySelector('[data-product-link]');

        var activeVariant =
          productData.variants.find(function (variant) {
            return String(variant.id) === card.dataset.initialVariantId;
          }) || productData.variants[0];

        updateCard(activeVariant);

        pills.forEach(function (pill) {
          pill.addEventListener('click', function () {
            if (pill.classList.contains('selected')) return;
            var variantId = pill.dataset.variantId;
            var variant = productData.variants.find(function (item) {
              return String(item.id) === variantId;
            });
            if (!variant) return;

            updateCard(variant);
            pills.forEach(function (btn) {
              btn.classList.toggle('selected', btn === pill);
            });
          });
        });

        function updateCard(variant) {
          if (priceEl) {
            var currencySymbol = priceEl.dataset.currencySymbol;
            if (currencySymbol) {
              var amountNumber = (variant.price / 100).toFixed(2);
              priceEl.textContent = currencySymbol + amountNumber;
            } else if (typeof Shopify !== 'undefined' && typeof Shopify.formatMoney === 'function') {
              priceEl.textContent = Shopify.formatMoney(variant.price, moneyFormat);
            } else {
              priceEl.textContent = (variant.price / 100).toFixed(2);
            }
          }

          if (linkEl) {
            linkEl.href = productData.url + '?variant=' + variant.id;
          }

          if (imageEl) {
            var variantImage =
              variant.image || (variant.featured_image && (variant.featured_image.url || variant.featured_image.src));
            var fallbackImage = productData.featured_image;
            var imageUrl = variantImage || fallbackImage;
            if (imageUrl) {
              imageEl.src = imageUrl;
            }
            if (variant.title) {
              imageEl.alt = variant.title;
            }
          }
        }
      });
    }
  })();
</script>

{% schema %}
{
  "name": "Featured Hero Collection",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "image_picker",
      "id": "hero_image",
      "label": "Hero Image"
    },
    {
      "type": "inline_richtext",
      "id": "title",
      "label": "Title"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description"
    },
    {
      "type": "text",
      "id": "link_text",
      "label": "Link Text"
    },
    {
      "type": "url",
      "id": "link_url",
      "label": "Link URL"
    },
    {
      "type": "text",
      "id": "currency_symbol",
      "label": "Currency Symbol",
      "default": "€"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 1,
      "max": 25,
      "step": 1,
      "default": 3,
      "label": "Products to show"
    }
  ],
  "presets": [
    {
      "name": "Featured Hero Collection"
    }
  ]
}
{% endschema %}
